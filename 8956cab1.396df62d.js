(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{130:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return u}));var a=n(2),o=n(6),i=(n(0),n(156)),r={title:"Quick start",sidebar_label:"Quick start",description:"Onepanel use case - computer vision automatic annotation"},c={id:"getting-started/use-cases/computervision/annotation/cvat/cvat_quick_guide",title:"Quick start",description:"Onepanel use case - computer vision automatic annotation",source:"@site/docs/getting-started/use-cases/computervision/annotation/cvat/cvat_quick_guide.md",permalink:"/docs/getting-started/use-cases/computervision/annotation/cvat/cvat_quick_guide",editUrl:"https://github.com/onepanelio/core-docs/tree/master/docs/getting-started/use-cases/computervision/annotation/cvat/cvat_quick_guide.md",sidebar_label:"Quick start",sidebar:"gettingStarted",previous:{title:"Environment variables",permalink:"/docs/getting-started/concepts/environment-variables"},next:{title:"Semi-automatic annotation with CVAT",permalink:"/docs/getting-started/use-cases/computervision/annotation/cvat/cvat_automatic_annotation"}},l=[{value:"1. Setting up CVAT",id:"1-setting-up-cvat",children:[{value:"a. Creating CVAT workspace",id:"a-creating-cvat-workspace",children:[]},{value:"b. Using filesyncer with CVAT (optional)",id:"b-using-filesyncer-with-cvat-optional",children:[]},{value:"c. CVAT super user and environment variables (optional)",id:"c-cvat-super-user-and-environment-variables-optional",children:[]}]},{value:"2. Annotating frames in CVAT",id:"2-annotating-frames-in-cvat",children:[{value:"a. Manual annotation",id:"a-manual-annotation",children:[]}]},{value:"3. Training new annotation model from CVAT",id:"3-training-new-annotation-model-from-cvat",children:[]},{value:"4. Using machine learning model for pre-annotation",id:"4-using-machine-learning-model-for-pre-annotation",children:[]}],s={rightToc:l};function u(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"For this quick start, we'll be using OpenCV's ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/opencv/cvat"}),"Computer Vision Annotation Tool (CVAT)"),". You will be able to use an existing model to pre-annotate your images or videos and then continuously train and improve your model on new data."),Object(i.b)("p",null,"For this quick start, we'll setup CVAT on Onepanel, annotate some images, train a model on this images, and use this newly trained model for pre-annotation."),Object(i.b)("h2",{id:"1-setting-up-cvat"},"1. Setting up CVAT"),Object(i.b)("h3",{id:"a-creating-cvat-workspace"},"a. Creating CVAT workspace"),Object(i.b)("p",null,"To launch CVAT, click on Workspaces, and you will find Create Workspace button as shown below."),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/create_workspaces_button_in_workspaces_page.png",alt:"Create Workspace"}))),Object(i.b)("p",null,"Now, select CVAT, machine type, you can also modify other parameters such as disk size. Once done, click on ",Object(i.b)("inlineCode",{parentName:"p"},"CREATE AND RUN"),". This will launch a new CVAT workspace. Please note that minimum RAM requirement for CVAT is 16GB."),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/launch_cvat.png",alt:"Create CVAT"}))),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Please note that the default CVAT workspace comes with a filesyncer which syncs data with your cloud provider. If the directory you will be syncing is large, make sure you allocate appropriate disk size for ",Object(i.b)("inlineCode",{parentName:"p"},"share")," mount."))),Object(i.b)("h3",{id:"b-using-filesyncer-with-cvat-optional"},"b. Using filesyncer with CVAT (optional)"),Object(i.b)("p",null,"The default CVAT workspace comes with a file syncer which syncs local directory (",Object(i.b)("inlineCode",{parentName:"p"},"/mnt/share"),") with directory on your cloud provider. You should not change the directory on local machine since CVAT reads data from that directory. However, you can specify directory on your cloud provider (i.e S3). In other words, you can use data available in that directory on cloud storage directly in CVAT (i.e Connected file storage)."),Object(i.b)("p",null,"File syncer downloads all data from cloud storage to local directory from where CVAT reads the data. By default, this directory on cloud storage is ",Object(i.b)("inlineCode",{parentName:"p"},"workflow-data"),". We recommend you don't change this directory. But if required, you can change this directory by modifying default directory name while creating CVAT workspace as shown below."),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/sync_dir.png",alt:"CVAT sync directory"}))),Object(i.b)("h3",{id:"c-cvat-super-user-and-environment-variables-optional"},"c. CVAT super user and environment variables (optional)"),Object(i.b)("p",null,"CVAT requires super user permission to perform certain tasks. Onepanel automatically creates a superuser when you execute CVAT workspace. Your username will be ",Object(i.b)("inlineCode",{parentName:"p"},"admin")," and password will be onepanel token. Please note that you generated auth token for Onepanel while setting up the Onepanel. ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/getting-started/quickstart#step-1-install-onepanel"}),"See step #9")," of installation guide."),Object(i.b)("p",null,"You don't need to set any environment variables to use default features. But you may need to set some environment variables for some custom features (i.e slack notifications). You can easily set environment variables by clicking Settings button on top nav bar. This will open up a settings page, where you can set environment variables. Following is an example of setting an environment variable.\n",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/env_set.PNG",alt:"Set Enviornment Variable"}))),Object(i.b)("h2",{id:"2-annotating-frames-in-cvat"},"2. Annotating frames in CVAT"),Object(i.b)("p",null,"Once you're inside CVAT dashboard, you can create new tasks to start annotating. You will find a Create New Task button on top, clicking on it will open up a new pop up window as follows:"),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/create_new_task.PNG",alt:"Create new task"}))),Object(i.b)("p",null,"Now, you can give this task a name you like. Then, labels that you are interested in annotating (i.e car, bicycle). You also need to select the source of your data (images). You can upload from your local machine or use data uploaded to your cloud storage. Please note that in order to use data from cloud storage, you must set appropriate directory while creating CVAT workspace. "),Object(i.b)("p",null,"If you want to use data from your cloud storage while creating a new task, you can select ",Object(i.b)("inlineCode",{parentName:"p"},"Connected file share")," while creating new task. It will show all the files from ",Object(i.b)("inlineCode",{parentName:"p"},"workflow-data")," (by default) directory on cloud storage.\n",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/create_new_task_shared.PNG",alt:"Create task from shared storage"}))),Object(i.b)("h3",{id:"a-manual-annotation"},"a. Manual annotation"),Object(i.b)("p",null,"Once you have created a new task, you can start annotating your data. CVAT supports points, box, polylines, polygons for annotation. So, the first thing you should do is go to left sidebar and select the type of annotation you want as shown below. "),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("strong",{parentName:"p"},"Points"),":\nIf you want to annotate points, then select Points instead of Box which is a default choice. Once you select points, you can start annotating by clicking on Create Shape, clicking on image where you want to put the point and then click on stop shape. Or alternatively you can use keyboard shortcut N instead of Create Shape/Stop Shape. Make sure you periodically save your annotation by pressing ctrl + s.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("strong",{parentName:"p"},"Bounding box"),":\nThe same process follows for bounding boxes. Select Box and press N to start annotating once done, press N to finish annotation. Sometimes N will draw ",Object(i.b)("inlineCode",{parentName:"p"},"rectangle shape")," and sometimes it will draw ",Object(i.b)("inlineCode",{parentName:"p"},"rectangle track"),". In order to ensure you have the right one, please draw one box by manually selecting Shape or Track from the UI. Once you manually select type of box from the UI, it will draw what you selected for the box everytime you press N."))),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/draw_shape.PNG",alt:"Annotation"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Polygons"),":\nSimilarly, select polygons or polylines and follow same procedure for annotation.")),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/rectange_new_cvat.PNG",alt:"Select annotation"}))),Object(i.b)("p",null,"It is highly recommended that you dump your annotation periodically. In case of any failure, this can be used to recover the tasks."),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Please note that you can use pre-trained models for pre-annotation of your frames. This will drastically reduce time it takes for annotation. For more information on pre-annotation, please see section 4."))),Object(i.b)("h2",{id:"3-training-new-annotation-model-from-cvat"},"3. Training new annotation model from CVAT"),Object(i.b)("p",null,"Onepanel also allows you to further finetune your model for annotation. Once you are done with your annotation or adjustment to pre-annotation, you can train a new model on it. To do so, go to dashboard and click on Actions under the task for which you want to train a model. Then, select ",Object(i.b)("inlineCode",{parentName:"p"},"Execute training workflow"),"."),Object(i.b)("p",null,"There, you can select any training workflows you like. You can add your own training workflows/model as well. Checkout more about Onepanel Workflow ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/getting-started/concepts/workflows"}),"here"),"."),Object(i.b)("p",null,"By default, you can use either Tensorflow OD API for bounding boxes or Mask RCNN for segmentation."),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/maskrcnn-training.png",alt:"Create Annotation Model"}))),Object(i.b)("p",null,"Here, you can set various parameters for model training. You can select previously trained model as a checkpoint by setting ",Object(i.b)("inlineCode",{parentName:"p"},"Checkpoint path"),". For more information on these parameters, please take a look at our ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"./cvat_annotation_model"}),"documentation")," on training models."),Object(i.b)("h2",{id:"4-using-machine-learning-model-for-pre-annotation"},"4. Using machine learning model for pre-annotation"),Object(i.b)("p",null,"Onepanel\u2019s CVAT supports a feature to pre-annotate images for common objects. You can add your custom models to pre-annotation other objects as well. In order to use any pre-annotation feature, you first need to upload the model. By default, we provide Faster RCNN for object detection and Mask RCNN for semantic segmentation. "),Object(i.b)("p",null,"To upload a model, click on Models, and give a name to it. Click on select files and upload your model (.pb and .csv file). Hit submit to upload the model.\n",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/upload_model.PNG",alt:"Model Manager"}))),Object(i.b)("p",null,"Once you submit your model, click on Models again and you will find your model in the list. You can also use files from ",Object(i.b)("inlineCode",{parentName:"p"},"Connected file share")," just like creating new tasks."),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/upload_model_after.PNG",alt:"Uploaded Models"}))),Object(i.b)("p",null,"Once you have the models in Model Manager. Click on Automatic Annotation under Actions menu. Then, you will be asked to select the model you want to use for pre-annotation. You can also control the class mapping from your task\u2019s classes to model\u2019s classes. Once done, click on Submit to start pre-annotation. Once it's done, you can click on the task link to access the annotation."),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/class_mapping.png",alt:"Class mapping"}))),Object(i.b)("p",null,"If you need help or have questions regarding CVAT, please feel free to ask them on our ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://join.slack.com/t/onepanel-ce/shared_invite/zt-eyjnwec0-nLaHhjif9Y~gA05KuX6AUg"}),"Slack channel.")))}u.isMDXComponent=!0},156:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),o=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=o.a.createContext({}),u=function(e){var t=o.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=u(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},b=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,r=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=u(n),b=a,m=p["".concat(r,".").concat(b)]||p[b]||d[b]||i;return n?o.a.createElement(m,c(c({ref:t},s),{},{components:n})):o.a.createElement(m,c({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=b;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,r[1]=c;for(var s=2;s<i;s++)r[s]=n[s];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);